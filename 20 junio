create table AEROLINEA(

ID_AEROLINEA    INTEGER,
NOMBRE          VARCHAR(120),
CONSTRAINT ID_AEROLINEA_PK primary KEY
(ID_AEROLINEA));

create table AVION(

ID_AVION        INTEGER,
ID_AEROLINEA    INTEGER,
ASIENTO         INTEGER,
CONSTRAINT ID_AVION_PK primary KEY
(ID_AVION),
CONSTRAINT ID_AEROLINEA_FK FOREIGN KEY
(ID_AEROLINEA) REFERENCES Aerolineas (ID_AEROLINEA));


CREATE SEQUENCE sec_AEROLINEA
start with 1
increment  by 1
nomaxvalue


CREATE SEQUENCE sec_AVION
start with 1
increment  by 1
nomaxvalue



CREATE OR REPLACE PROCEDURE GUARDAR_AEROLINEA(
MY_ID_AEROLINEA out integer, MY_NOMBRE in varchar2)

AS
BEGIN
SELECT SEC_AEROLINEA.Nextval INTO MY_ID_AEROLINEA FROM dual;

Insert Into AEROLINEA VALUES(MY_ID_AEROLINEA,MY_NOMBRE);
END;
/


CREATE OR REPLACE PROCEDURE GUARDAR_AVION(
MY_ID_AVION out integer, MY_ID_AEROLINEA IN INTEGER, MY_ASIENTO IN INTEGER)

AS
BEGIN
SELECT SEC_AVION.Nextval INTO MY_ID_AVION FROM dual;

Insert Into AVION VALUES(MY_ID_AVION,MY_ID_AEROLINEA, MY_ASIENTO);
END;
/






DECLARE 
VOLAR INTEGER;
BEGIN
GUARDAR_AEROLINEA(VOLAR, 'AEROMEXICO');
GUARDAR_AEROLINEA(VOLAR, 'CONTINENTAL_AIRLINES');
GUARDAR_AEROLINEA(VOLAR, 'AIRBUS');
GUARDAR_AEROLINEA(VOLAR, 'AMERICAN_AIRLINES');
END;


DECLARE
VALOR INTEGER;
BEGIN
GUARDAR_AVION(VALOR, 1, 200);
GUARDAR_AVION(VALOR, 2, 120);
GUARDAR_AVION(VALOR, 3, 140);
GUARDAR_AVION(VALOR, 4, 160);
END;

//////////////***************//////////////////***************/////////////////**************//////////////////

--UNION DE TABLAS CON CURSORES
--NOMBRE DE LA AEROLINEA, LOS AVIONES QUE TIENE Y LOS ASIENTOD DE LOS ASIENTOS

SET SERVEROUTPUT ON;
--EJECUTAR PRIMERO EL CURSOR SET PARA EL DBMS
DECLARE
CURSOR CURSOR_AEROPUERTO IS SELECT AERO.NOMBRE, AVI.ASIENTO
FROM AEROLINEA AERO, AVION AVI
--AERO=PK Y AVI=FK
WHERE AERO.ID_AEROLINEA=AVI.ID_AEROLINEA;
BEGIN
--FOR DEL CURSOR CON UN CICLO
FOR REC_REGISTRO IN CURSOR_AEROPUERTO LOOP
DBMS_OUTPUT.PUT_LINE('AEROLINEA:'||REC_REGISTRO.NOMBRE||'EL NOMBRE DE AVION ES:'||REC_REGISTRO.ASIENTO);
END LOOP;
END;

https://github.com/daton/guia-ceneval
